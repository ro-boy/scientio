language: python

python:
  - 3.6

cache: pip

services:
  - docker

env:
  - NEO4J_ADDRESS="localhost:7474" NEO4J_USERNAME="neo4j" NEO4J_PASSWORD="neo42j"

before_install:
  - docker pull neo4j
  - docker events&
  - docker run --publish=7474:7474 --publish=7687:7687 --volume=${HOME}/neo4j/data:/data --volume=${HOME}/neo4j/logs:/logs neo4j:3.0
  - docker ps -a
  - curl -vX POST http://neo4j:neo4j@localhost:7474/user/neo4j/password -d"password=neo42j"

install:
  - pip install -r requirements.txt

script:
  - pytest
